#!nsh
#
# @name WaterBee
#
# @type Tait custom
#
# @maintainer Suzanna Paulos <spaulos@taittowers.com>
#

#start required apps:
sh /etc/init.d/rc.mc_defaults

#set VEHICLE_TYPE 11
pozyx start

param set MAV_SYS_ID 10
param set MAV_BROADCAST 1


param set ATT_ACC_COMP 0
param set ATT_BIAS_MAX 0.05
param set ATT_EXT_HDG_M 2
param set ATT_MAG_DECL 0
param set ATT_MAG_DECL_A 1
param set ATT_VIGE_THRESH 0.2
param set ATT_W_ACC 0.1
param set ATT_W_EXT_HDG 0.1
param set ATT_W_GYRO_BIAS 0.1
param set ATT_W_MAG 0

param set LPE_ACC_XY 0.05
param set LPE_PN_B 0.0002
param set LPE_PN_P 0.15
param set LPE_PN_T 0.1
param set LPE_PN_V 0.1
param set LPE_VIC_P 0.15

param set MC_PITCH_P 0
param set MC_PITCHRATE_P 0.6
param set MC_PITCH_TC 0.25
param set MC_ROLL_P 0
param set MC_ROLLRATE_P 0.6
param set MC_ROLL_TC 0.25
param set MC_YAWRATE_D 0.1
param set MC_YAWRATE_FF 0.1
param set MC_YAWRATE_I 0
param set MC_YAWRATE_MAX 45
param set MC_YAWRATE_P 0
param set MC_YAW_FF 0.05
param set MC_YAW_P 2.8

param set MPC_ACC_HOR_MAX 15
param set MPC_HOLD_MAX_XY 0
param set MPC_MAN_P_MAX 90
param set MPC_MAN_R_MAX 90
param set MPC_TILTMAX_AIR 90
param set MPC_TILTMAX_LND 90
param set MPC_VELD_LP 3
param set MPC_XY_CRUISE 0.3
param set MPC_XY_FF 0.5
param set MPC_XY_P 5
param set MPC_XY_VEL_D 0.1
param set MPC_XY_VEL_I 0
param set MPC_XY_VEL_MAX 0.9
param set MPC_XY_VEL_P 0.15

param set SENS_BOARD_ROT 6

param set INAV_DISAB_MOCAP 0

param set SYS_MC_EST_GROUP 0
param set SYS_COMPANION 57600

param set COM_RC_IN_MODE 1
param set COM_ARM_IMU_ACC 2

param set RC_MAP_FLTMODE 8
param set COM_FLTMODE1 7
param set COM_FLTMODE2 7
param set COM_FLTMODE3 2
param set COM_FLTMODE4 2
param set COM_FLTMODE5 0
param set COM_FLTMODE6 0

param set RC_MAP_KILL_SW 7
param set RC_KILLSWITCH_TH -0.9

#disable need for safety switch -- NAV should send this parameter with ES status
param set CBRK_IO_SAFETY 22027
param set CBRK_USB_CHK 197848

#battery settings
param set BAT_N_CELLS 4
param set BAT_V_CHARGED 3.5
param set BAT_V_EMPTY 2.65
param set BAT_V_DIV 12.27

#set mixers
set MIXER waterbee
param set PWM_DISARMED 0
param set PWM_MIN 1064
param set PWM_MAX 1864
param set PWM_RATE 400

set MIXER_AUX pass
set PWM_AUX_RATE 50
set PWM_AUX_OUT 1234
param set PWM_AUX_DISARMED 1000
param set PWM_AUX_MIN 1000
param set PWM_AUX_MAX 2000
param set RC_MAP_AUX1 5
param set RC_MAP_AUX2 6
